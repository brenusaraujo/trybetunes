{"ast":null,"code":"var _jsxFileName = \"/Users/brenoaraujo/projects-to-github/TrybeTunes/src/pages/ProfileEdit.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { shape } from 'prop-types';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Header from '../components/Header';\nimport '../css/ProfileEdit.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.onButtonClick = this.onButtonClick.bind(this);\n    this.validateEntries = this.validateEntries.bind(this);\n    this.state = {\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      saveButtonIsDisabled: true,\n      loading: false,\n      redirect: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    }, () => getUser().then(_ref => {\n      let {\n        name,\n        email,\n        image,\n        description\n      } = _ref;\n      this.setState({\n        name,\n        email,\n        image,\n        description,\n        loading: false\n      }, () => this.validateEntries());\n    }));\n  }\n\n  handleChange(_ref2) {\n    let {\n      target: {\n        name,\n        value\n      }\n    } = _ref2;\n    this.setState({\n      [name]: value\n    }, () => this.validateEntries());\n  }\n\n  onButtonClick() {\n    const {\n      name,\n      email,\n      image,\n      description\n    } = this.state;\n    const {\n      history: {\n        push\n      }\n    } = this.props;\n    this.setState({\n      loading: true\n    }, () => updateUser({\n      name,\n      email,\n      image,\n      description\n    }).then(() => push('/profile')));\n  }\n\n  validateEntries() {\n    const {\n      name,\n      email,\n      image,\n      description\n    } = this.state;\n    const REGEX_TO_VALIDATE_EMAIL = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n    const isValid = [name, email, image, description].every(_ref3 => {\n      let {\n        length\n      } = _ref3;\n      return length > 0;\n    }) && REGEX_TO_VALIDATE_EMAIL.test(email);\n    this.setState({\n      saveButtonIsDisabled: !isValid\n    });\n  }\n\n  render() {\n    const {\n      name,\n      email,\n      image,\n      description,\n      saveButtonIsDisabled,\n      loading,\n      redirect\n    } = this.state;\n    if (redirect) return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 26\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        profile: \"active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"edit-loading\",\n        children: \"Carregando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        \"data-testid\": \"page-profile-edit\",\n        className: \"edit-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Edite suas informa\\xE7\\xF5es\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"editName\",\n          children: [\"Nome:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"edit-input-name\",\n            id: \"editName\",\n            name: \"name\",\n            onChange: this.handleChange,\n            placeholder: \"Digite seu nome...\",\n            type: \"text\",\n            value: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"editEmail\",\n          children: [\"E-mail:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"edit-input-email\",\n            id: \"editEmail\",\n            name: \"email\",\n            onChange: this.handleChange,\n            placeholder: \"Digite seu e-mail...\",\n            type: \"text\",\n            value: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"editDescription\",\n          children: [\"Descri\\xE7\\xE3o:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"edit-input-description\",\n            id: \"editDescription\",\n            name: \"description\",\n            onChange: this.handleChange,\n            placeholder: \"D\\xEA mais informa\\xE7\\xF5es sobre voc\\xEA...\",\n            type: \"text\",\n            value: description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"editImage\",\n          children: [\"Imagem:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"edit-input-image\",\n            id: \"editImage\",\n            name: \"image\",\n            onChange: this.handleChange,\n            placeholder: \"URL da imagem...\",\n            type: \"text\",\n            value: image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"edit-button-save\",\n          disabled: saveButtonIsDisabled,\n          onClick: this.onButtonClick,\n          type: \"button\",\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nProfileEdit.propTypes = {\n  history: shape({}).isRequired\n};\nexport default ProfileEdit;","map":{"version":3,"sources":["/Users/brenoaraujo/projects-to-github/TrybeTunes/src/pages/ProfileEdit.jsx"],"names":["React","Component","Redirect","shape","getUser","updateUser","Header","ProfileEdit","constructor","handleChange","bind","onButtonClick","validateEntries","state","name","email","image","description","saveButtonIsDisabled","loading","redirect","componentDidMount","setState","then","target","value","history","push","props","REGEX_TO_VALIDATE_EMAIL","isValid","every","length","test","render","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { shape } from 'prop-types';\n\nimport { getUser, updateUser } from '../services/userAPI';\n\nimport Header from '../components/Header';\n\nimport '../css/ProfileEdit.css';\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = this.handleChange.bind(this);\n    this.onButtonClick = this.onButtonClick.bind(this);\n    this.validateEntries = this.validateEntries.bind(this);\n\n    this.state = {\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      saveButtonIsDisabled: true,\n      loading: false,\n      redirect: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState(\n      { loading: true },\n      () => getUser().then(({ name, email, image, description }) => {\n        this.setState(\n          { name, email, image, description, loading: false },\n          () => this.validateEntries(),\n        );\n      }),\n    );\n  }\n\n  handleChange({ target: { name, value } }) {\n    this.setState({ [name]: value }, () => this.validateEntries());\n  }\n\n  onButtonClick() {\n    const { name, email, image, description } = this.state;\n    const { history: { push } } = this.props;\n\n    this.setState(\n      { loading: true },\n      () => updateUser({ name, email, image, description })\n        .then(() => push('/profile')),\n    );\n  }\n\n  validateEntries() {\n    const { name, email, image, description } = this.state;\n\n    const REGEX_TO_VALIDATE_EMAIL = (\n      /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/\n    );\n\n    const isValid = [name, email, image, description].every(({ length }) => length > 0)\n      && REGEX_TO_VALIDATE_EMAIL.test(email);\n\n    this.setState({ saveButtonIsDisabled: !isValid });\n  }\n\n  render() {\n    const {\n      name,\n      email,\n      image,\n      description,\n      saveButtonIsDisabled,\n      loading,\n      redirect,\n    } = this.state;\n\n    if (redirect) return <Redirect to=\"/profile\" />;\n\n    return (\n      <div className=\"page\">\n        <Header profile=\"active\" />\n\n        { loading\n          ? <p className=\"edit-loading\">Carregando...</p>\n          : (\n            <form data-testid=\"page-profile-edit\" className=\"edit-form\">\n              <h1>Edite suas informações</h1>\n              <label htmlFor=\"editName\">\n                Nome:\n                <input\n                  data-testid=\"edit-input-name\"\n                  id=\"editName\"\n                  name=\"name\"\n                  onChange={ this.handleChange }\n                  placeholder=\"Digite seu nome...\"\n                  type=\"text\"\n                  value={ name }\n                />\n              </label>\n\n              <label htmlFor=\"editEmail\">\n                E-mail:\n                <input\n                  data-testid=\"edit-input-email\"\n                  id=\"editEmail\"\n                  name=\"email\"\n                  onChange={ this.handleChange }\n                  placeholder=\"Digite seu e-mail...\"\n                  type=\"text\"\n                  value={ email }\n                />\n              </label>\n\n              <label htmlFor=\"editDescription\">\n                Descrição:\n                <input\n                  data-testid=\"edit-input-description\"\n                  id=\"editDescription\"\n                  name=\"description\"\n                  onChange={ this.handleChange }\n                  placeholder=\"Dê mais informações sobre você...\"\n                  type=\"text\"\n                  value={ description }\n                />\n              </label>\n\n              <label htmlFor=\"editImage\">\n                Imagem:\n                <input\n                  data-testid=\"edit-input-image\"\n                  id=\"editImage\"\n                  name=\"image\"\n                  onChange={ this.handleChange }\n                  placeholder=\"URL da imagem...\"\n                  type=\"text\"\n                  value={ image }\n                />\n              </label>\n\n              <button\n                data-testid=\"edit-button-save\"\n                disabled={ saveButtonIsDisabled }\n                onClick={ this.onButtonClick }\n                type=\"button\"\n              >\n                Salvar\n              </button>\n            </form>\n          )}\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: shape({}).isRequired,\n};\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}